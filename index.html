<!DOCTYPE html>
<html>
   <head>
     <!-- Add this line to remove the Cannot get Favicon.ico to display error in
     the console -->

     <!-- Failed to load resource: the server responded with a status of 404 (Not Found) -->
     <!-- Cannot GET /favicon.ico -->
     <!-- :3000/favicon.ico:1  -->


     <script type="text/javascript" src="/script/script.js"></script>


     <!-- The css file has to be placed in a folder name static -->
     <link rel="stylesheet" href="static/style.css">



     <link rel="stylesheet" href= 
"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> 
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

     <!-- D3 library -->
     <script src="https://d3js.org/d3.v6.min.js"></script>

 
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


     <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>



    <link href="/favicon.ico" type="image/x-icon" rel="icon" />
    <script src = "/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/force-graph@1.30.2/dist/force-graph.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

     <!-- For 3D -->
    <!--  <script src="https://unpkg.com/3d-force-graph@1.66.6/dist/3d-force-graph.min.js"></script> -->

   </head>


   <body class="body">
   <!--  <div>
        <p id="test">Okay</p>
    </div> -->


    <div class="container-fluid">
        <div class="row firstRow">

          <div class="leftColumn col-2">
            <!-- These are a lot of rows -->
            <div class="row">
                <h4 class="headerStyle">Display the dataset</h4>
            </div>

            <div class="row">

                <!-- Testing code -->
                <div id="dataSet"></div>
                <!-- <select class="buttonStyle">
                    <option>options for different data set</option>
                </select> -->
                 <button class="buttonStyle" onclick="displayOriginal()">Display</button>
            </div>

            <!-- <div class="row"> -->
            <!-- <div class="lineDiv"> -->
                    <hr class="lineStyle">
            <!-- </div> -->
            <!-- </div> -->

            <div class="row">
                <h4 class="headerStyle">Display property dataset</h4>
            </div>

            <div class="row">
                 <div id="container"></div>
            </div>


            <div class="row">
                <input class="buttonStyle" type="button" value="Display"  onclick="changeOpt()"/>
            </div>


            <!-- <div class="row"> -->
                <hr class="lineStyle">
            <!-- </div> -->



            <!-- Node styling -->
            <div class="row">
                <h4 class="headerStyle">Node Styling</h4>
            </div>

            <div class="row">
                <select class="buttonStyle" id="nodeOption">
                    <option>SetNodeSize</option>
                    <option>SetNodeVisibility</option>
                    <option>SetNodeColor</option>
                </select>
                <input class="buttonStyle" type="text" id="nodeInput">
            </div>
            <div class="row">
                <input class="buttonStyle" type="button" value="Execute"  onclick="changeNode()"/>
            </div>



            <!-- <div class="row"> -->
                <hr class="lineStyle">
            <!-- </div> -->



            <!-- Link styling -->
            <div class="row">
                <h4 class="headerStyle">Link Styling</h4>
            </div>

            <div class="row">
                <select class="buttonStyle" id="linkOption">
                    <option>SetLinkVisibility</option>
                    <option>SetLinkColor</option>
                    <option>SetLinkLineDash</option>
                    <option>SetLinkWidth</option>
                    <option>SetLinkCurvature</option>
                    <option>SetLinkDirectionalArrowLength</option>
                    <option>SetLinkDirectionalArrowColor</option>
                    <option>SetLinkDirectionalArrowRelPos</option>
                    <option>SetLinkDirectionalParticles</option>
                    <option>SetLinkDirectionalParticleSpeed</option>
                    <option>SetLinkDirectionalParticleWidth</option>
                    <option>SetLinkDirectionalParticleColor</option>
                </select>
               <!--  <input class="buttonStyle" type="text" id="linkInput"> -->
            </div>
            <div class="row">
                 <input class="buttonStyle" type="text" id="linkInput">
            </div>
            <div class="row">
                <input class="buttonStyle" type="button" value="Execute"  onclick="changeLink()"/>
            </div>

            <!-- <div class="row"> -->
                <hr class="lineStyle">
            <!-- </div> -->



            <div class="row">
                <h4 class="headerStyle">Pause or resume the animation</h4>
            </div>

            <div class="row">
                <form>
                    <!-- <input id="rbt1" type="radio" name="choice" value="pause" onclick="renderControl()" class="rbt"> pause
                    <input id="rbt2" type="radio" name="choice" value="resume" onclick="renderControl()" class="rbt"> resume -->

                     <span><input id="rbt1" type="radio" name="choice" value="pause" onclick="renderControl()"><span class="rbt">pause</span></span>
                     <span><input id="rbt1" type="radio" name="choice" value="pause" onclick="renderControl()"><span class="rbt">resume</span></span>

                </form>
            </div>


            <!-- <div class="row"> -->
                <hr class="lineStyle">
            <!-- </div> -->


            <div class="row">
                <h4 class="headerStyle">Display datafacts graph and datafacts</h4>
            </div>

            <div class="row">
                <div id="option1"></div>
            </div>
            <div class="row">
                 <div id="option2"></div>
            </div>
            <div class="row">
                <!-- <select class="buttonStyle" id="chartOption">
                    <option>Line Chart</option>
                    <option>Bar Chart</option>
                    <option>Area Chart</option>
                    <option>Stepped Area Chart</option>
                    <option>Column Chart</option>
                    <option>Combo Chart</option>
                </select> -->
                <form class="buttonStyle" id="chartOption">
                    <input type="checkbox" id="line chart">
                    <label for="line chart">Line Chart</label><br>
                    <input type="checkbox" id="bar chart">
                    <label for="bar chart">Bar Chart</label><br>
                    <input type="checkbox" id="area chart">
                    <label for="area chart">Area Chart</label><br>
                    <input type="checkbox" id="stepped area chart">
                    <label for="stepped area chart">Stepped Area Chart</label><br>
                    <input type="checkbox" id="column chart">
                    <label for="column chart">Column Chart</label><br>
                    <input type="checkbox" id="combo chart">
                    <label for="combo chart">Combo Chart</label><br>
                </form>
            </div>
            <div class="row">
                <input class="buttonStyle" type="button" value="Execute"  onclick="chartOpt()"/>
            </div>
           <!--  <div class="row">
                <input class="buttonStyle" type="button" value="Reset Node Color" onclick="resetNodeColor()"/>
            </div> -->

            <!-- Testing code -->
            <!-- <div class="row">
                <button type="button" id="hideSales"  >Hide Sales</button>
                <button type="button" id="hideExpenses"  >Hide Expence</button>
            </div> -->
            <!-- Testing code -->

          </div>
          


          <div class="middleColumn col-8">
            <!-- There are two rows  -->
            <div class="row">
              <div class="col-12">
                <h6 class="headerStyle">Display the graph</h6>
                <div id="displayGraph"></div>
              </div>
            </div>
        <!--     <div class="row">
              <div class="col-6">
                <h6 class="headerStyle">Display the charts</h6>
                <div id="chart"></div>
              </div>
              <div class="col-6">
                <h6 class="headerStyle">Display the data facts</h6>
                <div id="df"></div>
              </div>
            </div> -->

            <div class="row">
              <div class="col-12">
                <div class="row">
                    <h6 class="headerStyle">Display the charts</h6>
                    <!-- <div id="chart" class="data1"></div> -->
                    <input class="buttonStyle2" type="button" value="Reset Node Color" onclick="resetNodeColor()"/>
                 </div>


                <div class="row">

                    <div id="chart1"></div>
                    <div id="chart2"></div>
                    <div id="chart3"></div>
                    <div id="chart4"></div>
                    <div id="chart5"></div>
                    <div id="chart6"></div>
                    <div id="chart7"></div>
                    
                </div>


              </div>
            </div>


            <div class="row">
              <div class="col-12">
                <h6 class="headerStyle">Display the data facts</h6>
                <div id="df"></div>
              </div>
            </div>


          </div>



          <div class="rightColumn col-2">
                <div class="row">
                    <h4 class="headerStyle">Some statistics at the graph level</h4>
                    <ul id="graphStatistics">
                    </ul>
                </div>

                <div class="row">
                    <h4 class="headerStyle">Some statistics at the node level</h4>
                    <ul id="nodeStatistics"> </ul>
                    <ul id="nodeStatisticsAdditional"></ul>

                </div>
                    <h4 class="headerStyle">Enter a node number to find its links(place the mouse over a node in the graph to find its node number)</h4>
                <input class="buttonStyle" type="text" id="nodeStatisticsInput">
                <input class="buttonStyle" type="button" value="Submit"  onclick="getNodeStatistics()"/>
          </div>

      </div>
    </div>



    

    <script type="text/javascript">
        
               

        var oldOption1 = "";
        var oldOption2 = "";


        // For google charts
        google.charts.load('current', {'packages':['line']});

        google.charts.load('current', {'packages':['bar']});

        google.charts.load('current', {'packages':['corechart']});


        // google.charts.setOnLoadCallback(drawChart);

        // google.charts.setOnLoadCallback(drawBarChart);
        // google.charts.setOnLoadCallback(drawChart);


        var content;
        var mainGraph;
        var mainNode;
        var mainData;
        var windowSize = false;


        // The total number of nodes
        var totalNodes = 0;
        // Node counter to count the number of nodes for the chage color function
        var countTotalNodes = 0;
        // An array to store the cross linking nodes
        var nodeArray = [];

        // Color array for the charts
        var colorArray = ['red', 'blue', 'green', 'yellow', 'purple', 'pink', 'gold', 'dark green', 'LightSalmon', 'MediumPurple', 'OrangeRed', 'SpringGreen', 'YellowGreen'];

        // var colorNames = [
        
        // "Aquamarine", "BurlyWood", "Chocolate", "Cyan", "DarkCyan", "DarkGoldenRod", "DarkGreen",
        // "DarkOrange", "DarkSeaGreen", "DarkSlateGrey", "DimGray", "Green", "Fuchsia", "HotPink" 

        // ];


        var lineChart;
        var lineColumns = [];
        var lineSeries = {};


        var barChart;
        var barColumns = [];
        var barSeries = {};


        var areaChart;
        var areaColumns = [];
        var areaSeries = {};


        var steppedAreaChart;
        var steppedAreaColumns = [];
        var steppedAreaSeries = {};


        var columnChart;
        var columnColumns = [];
        var columnSeries = {};


        var comboChart;
        var comboColumns = [];
        var comboSeries = {};




        var socket = io();

        // ---------------- Getting the values from back end -------------

        socket.on('displayOriginalData', function(data){
            content = data;
        });



        var tt3 = [];
        socket.on('gettingKeysMap2', function(keys){
            // tt3 stores all the property names with the actual values with it
            tt3 = keys;

            var select = document.createElement("select");
            
            select.id = "sel";
            // select.class = "buttonStyle";
            // Follow tt3's property names to create options
            for (var val of tt3) {
                var option = document.createElement("option");
                option.value = val;
                option.text = val.charAt(0).toUpperCase() + val.slice(1);
                // option.class = "buttonStyle";
                select.appendChild(option);
            }

            // $('.container').empty();
            document.getElementById("container").appendChild(select);
            document.getElementById("sel").style.backgroundColor = "white";
            document.getElementById("sel").style.color = "black";
        });



        // Might not need this part
        var tt4 = [];
        socket.on('gettingValuesMap2', function(values){
            // tt4 stores all the property names position number in the featnames file
            tt4 = values;
        });
        

        // the unique property names are here
        var tt5 = [];
        socket.on('gettingKeysMap3', function(values){

            tt5 = values;

            var select1 = document.createElement("select");
            
            select1.id = "sel1"

            for (var val of tt5) {
                var option = document.createElement("option");
                option.value = val;
                option.text = val.charAt(0).toUpperCase() + val.slice(1);
                select1.appendChild(option);
            }

            document.getElementById("option1").appendChild(select1);
            document.getElementById("sel1").style.backgroundColor = "white";
            document.getElementById("sel1").style.color = "black";


            var select2 = document.createElement("select");
            
            select2.id = "sel2"
            
            for (var val of tt5) {
                var option = document.createElement("option");
                option.value = val;
                option.text = val.charAt(0).toUpperCase() + val.slice(1);
                select2.appendChild(option);
            }

            document.getElementById("option2").appendChild(select2);
            document.getElementById("sel2").style.backgroundColor = "white";
            document.getElementById("sel2").style.color = "black";
        });


        // the actual values for the property are here
        var tt6 = [];
        socket.on('gettingValuesMap3', function(values){
            tt6 = values;
        });



        socket.on('getStatistics', function(circleNumber, totalLinks, numGroup, largest, largestGroup, smallest, smallestGroup, totalNodes,greatestLinkNode, greatestLinksNum){

            var graphList = document.getElementById("graphStatistics");
            // The total number of groups

            graphList.innerHTML += "<li>There are " + circleNumber + " groups in this dataset</li>";


            // The total number of links
            graphList.innerHTML += "<li>There are " + totalLinks + " links in this dataset</li>";
            // Number of nodes in each group
            for(var i = 0; i < numGroup.length; i++){
                graphList.innerHTML += "<li>Group " + i + " has " + numGroup[i] + " nodes</li>";
            }
            // Number of nodes in each group
            // What is the largest group, how many nodes in it?
            graphList.innerHTML += "<li>The largest group in this dataset is " + largestGroup + ", there are " + largest + " nodes in it</li>";
            // What is the smallest group, how many nodes in it?
             graphList.innerHTML += "<li>The smallest group in this dataset is " + smallestGroup + ", there are " + smallest + " nodes in it</li>";

             graphList.style.color = "black";

            var nodeList = document.getElementById("nodeStatistics");
            // How many nodes are there?
            nodeList.innerHTML += "<li>There are " + totalNodes + " nodes in this dataset</li>";
            // Which node has the greatest number of links
            nodeList.innerHTML += "<li>Node " + greatestLinkNode + " has the greatest number of links, it has " + greatestLinksNum + " links</li>";
            
            nodeList.style.color = "black";
        });


        socket.on('getTotalNodes', function(data){
            totalNodes = data;
        });



// --------------- End of getting the values from backend ------------

    </script>


   </body>
</html>